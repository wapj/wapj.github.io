{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/make-fibonacci-in-python/","result":{"data":{"markdownRemark":{"html":"<p>피보나치 수열은 다들 들어보셨을 겁니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1, 1, 2, 3, 5, 8, 13...</code></pre></div>\n<p>이전의 두 수를 더한 값이 다음번 숫자가 되는 수열입니다.\n코딩 문제로 자주 나오기도 하고 그래서 한번 정리해봤습니다.\n사실 행렬로 푸는 방법이 한가지 더 있는데, 그건 파이썬하고는 별로 관계가 없어서 뺏습니다.</p>\n<p>본 문서에서는 총 3가지 방법으로 피보나치 수열을 구현할 것입니다.\n이 문서를 제대로 이해하게 되면 덤으로 파이썬 데커레이터와 제너레이터에 대한 기본적인 지식도 얻을 수 있습니다.</p>\n<p>그럼 시작하겠습니다.</p>\n<h2>첫번째 방법 : 재귀</h2>\n<p>첫번째 방법은 재귀로 푸는 방법입니다. 수학적 정의와 아주 동일하게 풀어낼 수 있습니다.\n깊이가 한단계 들어갈 때마다 2개의 함수를 호출해야하기 때문에 시간 복잡도는 O(2^n) 이 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">fibo</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># 재귀사용 O(2^n)</span>\n    <span class=\"token keyword\">if</span> n <span class=\"token operator\">&lt;=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">return</span> fibo<span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> fibo<span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이 방법은 코드는 간단하지만, 문제가 있는데 매우 느리다는 것입니다.\n이유는 fibo(5)를 구하기 위해서는 아래의 식과 같이 구해야하는데,\n보시면 <code class=\"language-text\">fibo(3), fibo(2)</code> 가 여러번 반복되는 것을 볼 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">fibo(5) = fibo(4) + fibo(3)\nfibo(4) = fibo(3) + fibo(2)\nfibo(3) = fibo(2) + fibo(1)\nfibo(2) = fibo(1)</code></pre></div>\n<h2>두번째 방법 : for loop</h2>\n<p>이번에는 for loop 으로 두변수의 값을 계속 치환하면서 구해보도록 하겠습니다.\n파이썬에서는 두개의 변수를 동시에 치환 할 수 있기 때문에 아래와 같은 구문이 가능합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">a, b = b, a + b</code></pre></div>\n<p>이 방법을 이용하면 속도도 O(N) 으로 빠르게 값을 구할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">fibo2</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># for loop O(N)</span>\n    <span class=\"token keyword\">if</span> n <span class=\"token operator\">&lt;=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n\n    a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> b<span class=\"token punctuation\">,</span> a <span class=\"token operator\">+</span> b\n    <span class=\"token keyword\">return</span> b</code></pre></div>\n<p>그러나, 만약에 N번째 피보나치수가 아니라 첫번째부터 N번째까지의 피보나치수를 구하고 싶다면?\n숫자가 증가할 때마다 이전의 피보나치수를 처음부터 다시 계산하게 됩니다. 그러면 이또한 복잡도가\n<code class=\"language-text\">( 1 + N) * N / 2</code> 의 복잡도로 O(N^2) 이 될것이고 많이 느리지는 않겠지만, 그래도 충분히 빠르다고는 할 수 없을 것입니다.</p>\n<h2>두번째 방법 개선하기</h2>\n<p>두번째 방법을 개선하기 위해서 캐시를 추가할 수 있습니다.\n그러면 이미 구한 숫자에 대해서는 따로 계산을 하지않고 캐시에서 가져오기 때문에 상수시간에 계산을 할 수가 있게 됩니다. 간단한 캐시를 구현해서 2번 피보나치 함수에 붙여보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">my_cache</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># 반복연산을 방지하기위한 간단한 캐시</span>\n    cache_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">cached</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">in</span> cache_dict<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> cache_dict<span class=\"token punctuation\">[</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n        result <span class=\"token operator\">=</span> func<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">)</span>\n        cache_dict<span class=\"token punctuation\">[</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> result\n        <span class=\"token keyword\">return</span> result\n\n    <span class=\"token keyword\">return</span> cached\n\n\n<span class=\"token decorator annotation punctuation\">@my_cache</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">fibo2_with_cache</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># 속도향상을 위해 캐시를 붙였다.</span>\n    <span class=\"token keyword\">return</span> fibo2<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>위의 코드에서 <code class=\"language-text\">my_cache</code> 라는 데커레이터를 만들어서 붙였습니다. 데커레이터에서는 미리 캐싱을 위한 딕셔너리를 만들고, 함수의 파라메터를 키로 결과를 값으로 저장하게 됩니다. 그래서 함수 실행시에 이미 캐시에 있는 값이라면 캐시에서 값을 꺼내와서 리턴해주게됩니다.</p>\n<p>이런 간단한 캐시를 추가함으로써 1부터 N개까지의 피보나치수를 구하는 속도가 더욱 빨라지게 되었습니다.\n한번씩만 연산을 하게 되므로 1부터~N까지 피보나치 수 구하기는 처음에는 O(N^2) 이겠지만, 두번째부터는 O(1)의 복잡도로 구할 수 있을 것입니다.</p>\n<h2>세번째 방법 : 제너레이터 사용하기</h2>\n<p>파이썬에는 무한한 수열을 다루기 위한 장치로 제너레이터라는 기능이 있습니다. 제너레이터 하나만으로 문서 여러개를 작성할 수 있기 때문에 여기서는 제너레이터에 대해서는 다루지 않고, 제너레이터를 사용해서 피보나치 수열을 만드는 것만 해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">fibo3</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># 제너레이터를 사용한 버전</span>\n    <span class=\"token comment\"># 캐시가 필요없다.</span>\n    <span class=\"token comment\"># O(N)</span>\n    a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">yield</span> a\n        a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> b<span class=\"token punctuation\">,</span> a <span class=\"token operator\">+</span> b</code></pre></div>\n<p>다른 함수들과 다른 특징은 바로 <code class=\"language-text\">return</code> 이 없고 <code class=\"language-text\">yield</code> 가 있다는 것 입니다. 편하게 <code class=\"language-text\">yield</code> 가 될 때 a 가 리턴된다고 생각하시면 됩니다. 또한 제너레이터는 이터레이터의 성질을 모두가지고 있어서 for 루프에 넣을 수 있습니다.</p>\n<p>아래와 같이 for in 구문에 넣으면 1~N 까지의 피보나치수를 아주 간단하게 구할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> fibo3<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>문법이 조금 익숙하지 않을뿐 매우 우아한 방법으로 무한한 수열을 다룰 수 있습니다.</p>\n<h2>수학공식을 사용한 방법</h2>\n<p>저도 찾다가 알게된 것인데, 아래 그림과 같은 피보나치 수열의 일반항 공식이 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9e30d2b691920de9975fce3956263891/cecac/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAsElEQVQY04VQiwqEMAzb/3+jIDqfU5Hhaz5zl4AgcnCF0q1pk1CDb1zXhTv4fubdO44D+77jPX+epzAmwzxBLqzrirZtYa2F9x4hBKRpqv88z1qs61rvZVkQRRGcc8iyTJgIi6LAMAyYpglVVSGOY+U4jkiSBE3TIM9zibHH5b7vhVGUAhSkIUNnHCQxFUlER2VZqtd1nZRZuUDHJNu2TZU9VhoR4ft+d+VtfmH/bv4Bl2uDskA2f7QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"피보나치일반항\"\n        title=\"피보나치일반항\"\n        src=\"/static/9e30d2b691920de9975fce3956263891/0a47e/1.png\"\n        srcset=\"/static/9e30d2b691920de9975fce3956263891/8a4e8/1.png 150w,\n/static/9e30d2b691920de9975fce3956263891/5a46d/1.png 300w,\n/static/9e30d2b691920de9975fce3956263891/0a47e/1.png 600w,\n/static/9e30d2b691920de9975fce3956263891/cecac/1.png 728w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>파이썬하고는 관계없지만, 개발을 하다보면 다른 사람이 만들어둔 알고리즘을 보고 구현해야 되는 경우도 있어서\n한번 공식대로 만들어 본것입니다. 값이 잘 나오는 것이 신기합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">fibo4</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># 공식을 활용한 버전</span>\n    <span class=\"token comment\"># 상수시간이므로 O(1)</span>\n    root5 <span class=\"token operator\">=</span> <span class=\"token builtin\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n    ratio <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> root5<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n    <span class=\"token keyword\">return</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">pow</span><span class=\"token punctuation\">(</span>ratio<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token builtin\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> ratio<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> root5<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>그외 참고</h3>\n<p>위키페디아를 보면 행렬을 사용하는 방법도 있는 것 같습니다만,\n이렇게 이 문제를 풀어야할 필요성을 잘 못느껴서 일단 스킵했습니다. 궁금하신 분은 위키페디아를 참고해주세요~</p>\n<h3>출처</h3>\n<ul>\n<li><a href=\"https://www.python-course.eu/generators.php\">https://www.python-course.eu/generators.php</a></li>\n<li><a href=\"https://www.mathfactory.net/10454\">https://www.mathfactory.net/10454</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Fibonacci_number\">https://en.wikipedia.org/wiki/Fibonacci_number</a></li>\n</ul>","excerpt":"<p>피보나치 수열은 다들 들어보셨을 겁니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1, 1, 2, 3, 5, 8, 13...</code></pre></div>\n<p>…</p>","tableOfContents":"<ul>\n<li><a href=\"/2020/make-fibonacci-in-python/#%EC%B2%AB%EB%B2%88%EC%A7%B8-%EB%B0%A9%EB%B2%95--%EC%9E%AC%EA%B7%80\">첫번째 방법 : 재귀</a></li>\n<li><a href=\"/2020/make-fibonacci-in-python/#%EB%91%90%EB%B2%88%EC%A7%B8-%EB%B0%A9%EB%B2%95--for-loop\">두번째 방법 : for loop</a></li>\n<li><a href=\"/2020/make-fibonacci-in-python/#%EB%91%90%EB%B2%88%EC%A7%B8-%EB%B0%A9%EB%B2%95-%EA%B0%9C%EC%84%A0%ED%95%98%EA%B8%B0\">두번째 방법 개선하기</a></li>\n<li><a href=\"/2020/make-fibonacci-in-python/#%EC%84%B8%EB%B2%88%EC%A7%B8-%EB%B0%A9%EB%B2%95--%EC%A0%9C%EB%84%88%EB%A0%88%EC%9D%B4%ED%84%B0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\">세번째 방법 : 제너레이터 사용하기</a></li>\n<li>\n<p><a href=\"/2020/make-fibonacci-in-python/#%EC%88%98%ED%95%99%EA%B3%B5%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%B0%A9%EB%B2%95\">수학공식을 사용한 방법</a></p>\n<ul>\n<li><a href=\"/2020/make-fibonacci-in-python/#%EA%B7%B8%EC%99%B8-%EC%B0%B8%EA%B3%A0\">그외 참고</a></li>\n<li><a href=\"/2020/make-fibonacci-in-python/#%EC%B6%9C%EC%B2%98\">출처</a></li>\n</ul>\n</li>\n</ul>","timeToRead":3,"frontmatter":{"title":"파이썬에서 피보나치 수열을 만드는법 3가지 ( + 1 )","tags":["python","fibonacci"],"category":"dev","image":{"childImageSharp":{"resize":{"src":"/static/cf03cfe53e20b89987484ee4efbf20fe/2244e/fibonacci.jpg","height":600,"width":400}}}}}},"pageContext":{"slug":"/2020/make-fibonacci-in-python/","next":{"fields":{"slug":"/diary/2020/10/team-members-have-changed-jobs/"},"frontmatter":{"title":"팀원의 이직","tags":null,"category":"diary","image":null}},"prev":{"fields":{"slug":"/2020/python-packaging-history/"},"frontmatter":{"title":"파이썬 패키징, 배포 툴의 과거와 현재","tags":["python","packaging"],"category":"dev","image":null}}}},"staticQueryHashes":["3159585216","4202924991"]}